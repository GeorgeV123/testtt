import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.HttpStatusException;

public class ExamResultsFetcher {
    public static void main(String[] args) {
        String url = "https://adminchinesetest.cn"; // Replace with your actual endpoint

        try {
            // Fetch the HTML response
            Document document = Jsoup.connect(url).get();

            // Parse and extract relevant information
            String name = getNextCellValue(document, "Name on Certificate");
            String chineseName = getNextCellValue(document, "Chinese Name");
            String nationality = getNextCellValue(document, "Nationality");
            String gender = getNextCellValue(document, "Gender");
            String totalScore = getCellValue(document, "Total Score");
            String status = getCellValue(document, "Status");

            // Print the results
            System.out.println("Name: " + name);
            System.out.println("Chinese Name: " + chineseName);
            System.out.println("Nationality: " + nationality);
            System.out.println("Gender: " + gender);
            System.out.println("Total Score: " + totalScore);
            System.out.println("Status: " + status);
        } catch (HttpStatusException e) {
            System.out.println("HTTP error fetching URL: " + e.getStatusCode() + " " + e.getMessage());
        } catch (Exception e) {
            e.printStackTrace(); // Print any other errors encountered
        }
    }

    private static String getNextCellValue(Document document, String label) {
        Element labelElement = document.select("td:contains(" + label + ")").first();
        if (labelElement != null) {
            Element nextCell = labelElement.nextElementSibling();
            return nextCell != null ? nextCell.text() : "Not Found";
        }
        return "Not Found";
    }

    private static String getCellValue(Document document, String label) {
        Element labelElement = document.select("td:contains(" + label + ")").first();
        return labelElement != null ? labelElement.text() : "Not Found";
    }
}
